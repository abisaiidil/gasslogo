<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gass Logo Viewer</title>
  <style>
    body, html { margin: 0; padding: 0; overflow: hidden; background: #111; }
    canvas { display: block; }
  </style>
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.1/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.1/examples/jsm/",
        "dat.gui": "https://cdn.jsdelivr.net/npm/dat.gui@0.7.9/build/dat.gui.module.js"
      }
    }
  </script>
</head>
<body>
<script type="module">
import * as THREE from 'three';
import { RectAreaLight } from 'three';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';
import { RectAreaLightUniformsLib } from 'three/addons/lights/RectAreaLightUniformsLib.js';
import { GUI } from 'dat.gui';

RectAreaLightUniformsLib.init();
const scene = new THREE.Scene();

// Kamera
const camera = new THREE.PerspectiveCamera(39.6, window.innerWidth/window.innerHeight, 0.1, 100);
camera.position.set(2, 0, 2);
camera.lookAt(0, 0, 0);

const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
document.body.appendChild(renderer.domElement);

// Lampu: Spot + AreaHighlight + AreaFiller
const spot = new THREE.SpotLight(0xffffff, 1.5);
spot.position.set(-0.603417, -1.24213, 0.652694);
spot.angle = THREE.MathUtils.degToRad(45);
spot.penumbra = 0.15;
spot.decay = 2;
spot.distance = 10;
spot.castShadow = true;
scene.add(spot);

const areaHL = new RectAreaLight(0xffffff, 3, 0.5, 0.5);
areaHL.position.set(0.741279, 0, -1.38792);
areaHL.castShadow = true;
scene.add(areaHL);

const areaFiller = new RectAreaLight(0xffffff, 0.5, 5, 5);
areaFiller.position.set(1.84348, 1.73237, -1.76528);
areaFiller.castShadow = true;
scene.add(areaFiller);

// GUI panel
const gui = new GUI();
const spotFolder = gui.addFolder('Spot Light');
spotFolder.add(spot, 'visible').name('Visible');
spotFolder.add(spot.position, 'x', -5, 5, 0.01).name('X');
spotFolder.add(spot.position, 'y', -5, 5, 0.01).name('Y');
spotFolder.add(spot.position, 'z', -5, 5, 0.01).name('Z');
spotFolder.add(spot, 'intensity', 0, 10).name('Intensity');
spotFolder.open();

const hlFolder = gui.addFolder('Highlight Light');
hlFolder.add(areaHL, 'visible').name('Visible');
hlFolder.add(areaHL.position, 'x', -5, 5, 0.01).name('X');
hlFolder.add(areaHL.position, 'y', -5, 5, 0.01).name('Y');
hlFolder.add(areaHL.position, 'z', -5, 5, 0.01).name('Z');
hlFolder.add(areaHL, 'intensity', 0, 10).name('Intensity');
hlFolder.open();

const fillerFolder = gui.addFolder('Filler Light');
fillerFolder.add(areaFiller, 'visible').name('Visible');
fillerFolder.add(areaFiller.position, 'x', -5, 5, 0.01).name('X');
fillerFolder.add(areaFiller.position, 'y', -5, 5, 0.01).name('Y');
fillerFolder.add(areaFiller.position, 'z', -5, 5, 0.01).name('Z');
fillerFolder.add(areaFiller, 'intensity', 0, 20).name('Intensity');
fillerFolder.open();

// Load model
const draco = new DRACOLoader();
draco.setDecoderPath('https://cdn.jsdelivr.net/npm/three@0.160.1/examples/jsm/libs/draco/');
const loader = new GLTFLoader();
loader.setDRACOLoader(draco);

loader.load('asset/gass_logo1.glb', gltf => {
  const logo = gltf.scene;
  logo.traverse(c => { if (c.isMesh) { c.castShadow = true; c.receiveShadow = true; }});
  scene.add(logo);

  const rotationSpeed = (2 * Math.PI) / (62 * 60);
  function animate() {
    requestAnimationFrame(animate);
    spot.lookAt(0, 0, 0);
    areaHL.lookAt(0, 0, 0);
    areaFiller.lookAt(0, 0, 0);

    logo.rotation.y += rotationSpeed;
    renderer.render(scene, camera);
  }
  animate();
}, undefined, err => console.error(err));

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
